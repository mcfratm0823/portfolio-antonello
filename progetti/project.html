<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Progetto - ANTONELLO GUARNIERI Â® VISUAL DESIGNER</title>
    
    <!-- Preload critical fonts to prevent FOUT -->
    <link rel="preload" href="../fonts/PPNeueMontreal-Medium.woff2" as="font" type="font/woff2" crossorigin fetchpriority="high">
    <link rel="preload" href="../fonts/PPNeueMontreal-Bold.woff2" as="font" type="font/woff2" crossorigin fetchpriority="high">
    <link rel="preload" href="../fonts/PPNeueMontreal-Regular.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Critical font-face inline to prevent FOUT -->
    <style>
        @font-face {
            font-family: Neue;
            src: url(../fonts/PPNeueMontreal-Medium.woff2) format("woff2");
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: Neue;
            src: url(../fonts/PPNeueMontreal-Bold.woff2) format("woff2");
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: Neue;
            src: url(../fonts/PPNeueMontreal-Regular.woff2) format("woff2");
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        /* Prevent FOUT with font stack */
        body {
            font-family: Neue, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
    </style>
    
    <!-- Global styles -->
    <link href="../css/global-cursor.css" rel="stylesheet">
    <link href="./project-detail.css" rel="stylesheet">
    
    <!-- Check for ES6 module support -->
    <script>
        // Feature detection for ES6 modules
        function supportsModules() {
            const script = document.createElement('script');
            return 'noModule' in script;
        }
        
        window.USING_MODULES = supportsModules();
    </script>
</head>
<body>
    <!-- Custom Cursor will be created dynamically by global-cursor.js -->
    <!-- Removed static HTML cursor to prevent initialization issues -->
    
    <!-- Form nascosto per Netlify Forms -->
    <form name="contact-menu" method="POST" data-netlify="true" netlify-honeypot="bot-field" style="display: none;">
        <input type="text" name="nome" />
        <input type="text" name="cognome" />
        <input type="email" name="email" />
        <textarea name="messaggio"></textarea>
    </form>

    <!-- Loading State -->
    <div id="loading-state" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #fff; display: flex; align-items: center; justify-content: center; z-index: 10000;">
        <div style="text-align: center;">
            <div style="width: 40px; height: 40px; border: 2px solid #000; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
            <p style="font-family: sans-serif; font-size: 14px; color: #666;">Caricamento progetto...</p>
        </div>
    </div>
    
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Prevent flash of underlying content */
        body {
            background: #fff;
            overflow: hidden; /* Prevent scroll during load */
        }
        
        body.loaded {
            overflow: auto;
        }
    </style>

    <!-- WHITE CONTAINER - Contenuto Bianco -->
    <div id="white-container" style="opacity: 0; transition: opacity 0.3s ease; background: #fff; position: relative; z-index: 100;">
        <!-- Main Content -->
        <main id="main-content">
            
            <!-- Header Section -->
            <section id="project-header">
                <h1 id="project-title">PROGETTO</h1>
                <div id="project-meta">
                    <span id="project-category">CATEGORY</span>
                    <span id="project-year">2024</span>
                    <span id="project-client">CLIENT</span>
                </div>
            </section>

            <!-- Project Description Block -->
            <section id="project-description">
                <div class="description-block">
                    <span class="description-label" id="concept-label">(CONCEPT)</span>
                    <p class="description-text" id="concept-text">
                        Loading project description...
                    </p>
                </div>
            </section>

            <!-- Hero Image -->
            <section id="hero-section">
                <div id="hero-image">
                    <img id="hero-img" src="" alt="" width="1200" height="600" fetchpriority="high" decoding="async">
                </div>
            </section>

            <!-- Second Project Description Block -->
            <section id="second-project-description">
                <div class="description-block">
                    <span class="description-label" id="approach-label">(APPROACH)</span>
                    <p class="description-text" id="approach-text">
                        Loading approach description...
                    </p>
                </div>
            </section>

            <!-- Static Gallery -->
            <section id="static-gallery">
                <div class="gallery-horizontal-pair">
                    <div class="gallery-item">
                        <img id="gallery-img-1" src="" alt="" loading="lazy" width="1200" height="800">
                    </div>
                    <div class="gallery-item">
                        <img id="gallery-img-2" src="" alt="" loading="lazy" width="1200" height="800">
                    </div>
                </div>
            </section>

        </main>
    </div>

    
    <!-- BLACK CONTAINER - Contenuto Nero -->
    <div id="black-container" style="opacity: 0; transition: opacity 0.3s ease; background: #000; position: relative; z-index: 99;">
        <!-- Left Info - Fixed Element Outside Gallery -->
        <div id="left-info">
            <div id="bottom-text-container">
                <div id="description">
                    <p>CREO ESPERIENZE DIGITALI CHIARE E UTILI, UNENDO DESIGN CURATO,<br>SVILUPPO CON AI E GESTIONE ATTENTA DEI PROGETTI PER<br>TRASFORMARE OGNI IDEA IN RISULTATI CONCRETI.</p>
                </div>
                <div id="right-info">
                    <p>ANTONELLOGUARNIERI.NET</p>
                    <p>ANTONELLOGUARNIERI6@GMAIL.COM</p>
                </div>
            </div>
        </div>
        
        <!-- Kinetic Gallery Section -->
        <section id="kinetic-gallery" data-bg-color="#000">
            
            <!-- Fixed Morphing Title -->
            <div class="morphing-title" id="morphing-title"></div>
            
            <div class="gallery-stream">
                    
                <div class="gallery-intro">
                    <h2 class="intro-text">Altri<br>progetti</h2>
                </div>
                
                <!-- Dynamic Related Projects will be inserted here -->
                <div id="related-projects-container">
                    <!-- Related projects loaded dynamically -->
                </div>
                
                <!-- Final CTA -->
                <div class="gallery-cta">
                    <a href="../portfolio.html" class="cta-content">
                        <h3 class="cta-title">Vedi tutti<br>i progetti</h3>
                    </a>
                </div>
                
            </div>
        </section>
    </div>

    <!-- External Dependencies - Load asynchronously -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" async></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" async></script>
    
    <!-- Module-based loading (modern browsers) -->
    <script type="module">
        import '../config/constants.js';
        import '../utils/formValidator.js';
        import '../js/navbar.js';
        import '../js/global-cursor.js';
        import './project-detail.js';
        import './professional-project-loader.js';
    </script>
    
    <!-- Fallback for browsers without module support -->
    <script nomodule src="../config/constants.js"></script>
    <script nomodule src="../utils/formValidator.js"></script>
    <script nomodule src="../js/global-cursor.js"></script>
    <script nomodule src="../js/navbar.js"></script>
    <script nomodule src="./project-detail.js"></script>
    <script nomodule src="./professional-project-loader.js"></script>
</body>
</html>