/**
 * Accessibility Fixes
 * Focus management and keyboard navigation improvements
 * 
 * IMPORTANTE: Non rimuove il custom cursor, aggiunge solo focus indicators
 */

/* =========================
   FOCUS VISIBLE STYLES
   ========================= */

/* Universal focus indicator for interactive elements */
a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible,
[role="button"]:focus-visible,
.focusable:focus-visible,
.project-card:focus-visible,
.service-item:focus-visible,
.filter-item:focus-visible {
    /* Remove default outline */
    outline: none;
    /* Ensure element is above others */
    position: relative;
    z-index: 999;
}

/* Focus ring using ::after pseudo-element */
a:focus-visible::after,
button:focus-visible::after,
input:focus-visible::after,
textarea:focus-visible::after,
select:focus-visible::after,
[tabindex]:focus-visible::after,
[role="button"]:focus-visible::after,
.focusable:focus-visible::after,
.project-card:focus-visible::after,
.service-item:focus-visible::after,
.filter-item:focus-visible::after {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border: 2px solid #fff;
    border-radius: inherit;
    pointer-events: none;
    z-index: 10000;
    animation: focusPulse 1.5s ease-in-out infinite;
}

/* Focus ring for light backgrounds */
.light-bg a:focus-visible::after,
.light-bg button:focus-visible::after,
.light-bg .focusable:focus-visible::after,
#white-container a:focus-visible::after,
#white-container button:focus-visible::after,
#white-container .focusable:focus-visible::after,
.white-section a:focus-visible::after,
.white-section button:focus-visible::after {
    border-color: #000;
}

/* Special handling for form inputs */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
    box-shadow: 0 0 0 2px #fff;
}

.light-bg input:focus-visible,
.light-bg textarea:focus-visible,
.light-bg select:focus-visible,
#white-container input:focus-visible,
#white-container textarea:focus-visible {
    box-shadow: 0 0 0 2px #000;
}

/* =========================
   SKIP NAVIGATION LINK
   ========================= */

.skip-nav {
    position: absolute;
    top: -40px;
    left: 0;
    background: #000;
    color: #fff;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 100000;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: 14px;
}

.skip-nav:focus {
    top: 0;
}

/* =========================
   KEYBOARD NAVIGATION HELPERS
   ========================= */

/* When keyboard navigation is active */
[data-keyboard-nav="true"] .custom-cursor {
    /* Keep cursor but make it subtle during keyboard nav */
    opacity: 0.3;
}

[data-keyboard-nav="true"] *:focus {
    /* Ensure focus is always visible */
    opacity: 1 !important;
}

/* =========================
   INTERACTIVE ELEMENTS
   ========================= */

/* Make service items keyboard accessible */
.service-item {
    cursor: pointer;
    transition: all 0.3s ease;
}

.service-item:focus-visible {
    background: rgba(255, 255, 255, 0.05);
}

/* Make project cards keyboard accessible */
.project-card {
    transition: transform 0.3s ease;
}

.project-card:focus-visible {
    transform: scale(1.02);
}

/* =========================
   ANIMATION PREFERENCES
   ========================= */

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    /* Disable focus pulse animation */
    a:focus-visible::after,
    button:focus-visible::after,
    .focusable:focus-visible::after {
        animation: none !important;
    }
}

/* =========================
   FOCUS ANIMATIONS
   ========================= */

/* Subtle pulse animation for focus */
@keyframes focusPulse {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.01);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* =========================
   ARIA HELPERS
   ========================= */

/* Hide decorative elements from screen readers */
.service-arrow[aria-hidden="true"],
.decorative-element {
    /* Keep visual but hide from AT */
    speak: none;
}

/* Ensure hidden elements stay hidden */
[aria-hidden="true"]:focus {
    outline: none !important;
}

/* =========================
   HIGH CONTRAST MODE
   ========================= */

@media (prefers-contrast: high) {
    a:focus-visible::after,
    button:focus-visible::after,
    .focusable:focus-visible::after {
        border-width: 3px;
        border-style: double;
    }
}